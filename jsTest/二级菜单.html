<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>二级菜单</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            list-style-type: none;
        }
        a,img{
            border: 0;
            text-decoration: none;
        }

        body {
            font: 12px/180% Arial, Helvetica, sans-serif, "新宋体
        }

    </style>
    <script src="js/reg.js"></script>
    <script>
        window.onload=function () {
            var menuSpan = document.querySelectorAll(".menuSpan");
            //openDiv仅仅是元素对象
            var openDiv=menuSpan[0].parentNode;

            for(var i=0;i<menuSpan.length;i++){
                menuSpan[i].onclick=function () {
                    //parentDiv指的是当前对象的父DIV
                    var parentDiv=this.parentNode;

                    toggleMenu(parentDiv);

                    //让菜单一次只能打开一个
                    //让toggle只保留添加功能
                    if(openDiv!=parentDiv && !hasClass(openDiv,"collapsed")) {
//                    if(!openDiv===parentDiv) {
                    //给首个div的父元素的属性赋值
                        //为统一处理动画过渡效果，我们希望
                        //在这将addClass改为toggleClass
//                        addClass(openDiv, "collapsed");
                        //此处toggleClass不需要移除的功能
//                        toggleClass(openDiv, "collapsed");
                        //因为调用的函数里面有toggleClass故注释掉上面的
                        toggleMenu(openDiv);

                    }
                    //对象转换为当前打开的div，但属性没有改
                    //仍然抱有疑问
                    openDiv=parentDiv;
                }
            }
            //提取动画切换效果
            function toggleMenu(obj) {
                //在切换类之前，获取元素的高度
                var begin=obj.offsetHeight;


                //给当前对象的DIV的属性复赋值
                toggleClass(obj, "collapsed");

                //切换类之后，获取元素的高度
                var end=obj.offsetHeight;
                //动画效果就是从begin向end过渡
                //将元素的高度重置为begin，toggleClass必须做，
                //让高度变化才能确定高度,设置的是内联样式，不改变就是25px
                obj.style.height=begin+"px";
                //参数:对象 属性值 动画目标 速度 回调函数
                move(obj, "height", end, 10, function () {
                    //动画执行完毕，删除内联样式
                    obj.style.height= "";
                });
            }


        };

    </script>
    <link rel="stylesheet" href="CSS/sdmenu.css">
    <script src="js/tools.js"></script>

</head>
<body>
    <div id="my_menu" class="sdmenu">
        <div>
            <span class="menuSpan">在线工具</span>
            <a href="#">图像优化</a>
            <a href="#">收藏夹图标生成器</a>
            <a href="#">邮件</a>
            <a href="#">htaccess密码</a>
            <a href="#">梯度图像</a>
            <a href="#">按钮生成器</a>
        </div>
        <div class="collapsed">
            <span class="menuSpan">支持我们</span>
            <a href="#">推荐我们</a>
            <a href="#">链接我们</a>
            <a href="#">网络资源</a>
        </div>
        <div class="collapsed">
            <span class="menuSpan">合作伙伴</span>
            <a href="#">JavaScript工具包</a>
            <a href="#">CSS驱动</a>
            <a href="#">CodingForums</a>
            <a href="#">CSS例子</a>
        </div>
        <div class="collapsed">
            <span class="menuSpan">测试电流</span>
            <a href="#">Current or not</a>
            <a href="#">Current or not</a>
            <a href="#">Current or not</a>
            <a href="#">Current or not</a>
        </div>
    </div>
</body>
</html>