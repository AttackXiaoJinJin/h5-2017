<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>promise</title>
</head>
<body>
  

  <script>
    window.onload=function () {
    //1.Promise的立即执行性
    var p=new Promise(function (resolve,reject) {
      //函数作为promise参数时，里面的代码会被立即执行
//      console.log('aaaa')
      //但resolve只有被then()方法调用才会执行,
      //但状态是resolved
      resolve('successa')
//      resolve(4)
    })
    console.log('bbbbb')
      console.log(p)
    //调用函数里面的参数
    p.then(function (value) {
      console.log(value)
    })

    //2.promise的三种状态
    var p1=new Promise(function (resolve,reject) {
      resolve(1)
    })
    var p2=new Promise(function (resolve,reject) {
      setTimeout(function () {
        resolve(2)
      },500)
    })
    var p3=new Promise(function (resove,reject) {
      setTimeout(function () {
        reject(3)
      },500)
    })
      /*
      * Promise的内部实现是一个状态机。
      * Promise有三种状态：pending，resolved，rejected。
      * 当Promise刚创建完成时，处于pending状态；
      * 当Promise中的函数参数执行了resolve后，Promise由pending状态变成resolved状态；
      * 如果在Promise的函数参数中执行的不是resolve方法，而是reject方法，那么Promise会由pending状态变成rejected状态。*/
      console.log(p1)
      console.log(p2)
      console.log(p3)
      setTimeout(function () {
        console.log(p2)
      },1000)
      setTimeout(function(){
        console.log(p3);
      }, 1000);

      p1.then(function(value){
        console.log(value);
      });
      p2.then(function(value){
        console.log(value);
      });
      p3.catch(function(err){
        console.log(err);
      });


      

    }
    
  </script>
</body>
</html>